<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kevin Cheng, Yueyang Ding, Tiffany Gong, Chenguang Li">

<title>Analyzing Key Factors Affecting Airbnb Prices Across Berlin, London, and Paris</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/quarto.js"></script>
<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/popper.min.js"></script>
<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Airbnb_Pricing_Analysis_Milestone_1_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Airbnb_Pricing_Analysis_Milestone_1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Airbnb_Pricing_Analysis_Milestone_1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Airbnb_Pricing_Analysis_Milestone_1_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">1</span> Summary</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2</span> Introduction</a></li>
  <li><a href="#dataset-description" id="toc-dataset-description" class="nav-link" data-scroll-target="#dataset-description"><span class="header-section-number">3</span> Dataset Description</a>
  <ul class="collapse">
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis"><span class="header-section-number">3.1</span> Exploratory Data Analysis</a></li>
  <li><a href="#correlation-matrix-of-numerical-variables" id="toc-correlation-matrix-of-numerical-variables" class="nav-link" data-scroll-target="#correlation-matrix-of-numerical-variables"><span class="header-section-number">3.2</span> Correlation Matrix of Numerical Variables</a></li>
  <li><a href="#regression-analysis" id="toc-regression-analysis" class="nav-link" data-scroll-target="#regression-analysis"><span class="header-section-number">3.3</span> Regression Analysis</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">4</span> Discussion</a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings"><span class="header-section-number">5</span> Key Findings</a>
  <ul class="collapse">
  <li><a href="#strongest-predictors-of-price" id="toc-strongest-predictors-of-price" class="nav-link" data-scroll-target="#strongest-predictors-of-price"><span class="header-section-number">5.1</span> Strongest Predictors of Price</a></li>
  <li><a href="#location-based-effects" id="toc-location-based-effects" class="nav-link" data-scroll-target="#location-based-effects"><span class="header-section-number">5.2</span> Location-Based Effects</a></li>
  <li><a href="#effect-of-host-room-type" id="toc-effect-of-host-room-type" class="nav-link" data-scroll-target="#effect-of-host-room-type"><span class="header-section-number">5.3</span> Effect of Host &amp; Room Type</a></li>
  <li><a href="#room-type" id="toc-room-type" class="nav-link" data-scroll-target="#room-type"><span class="header-section-number">5.4</span> Room Type</a></li>
  <li><a href="#city-based-price-differences" id="toc-city-based-price-differences" class="nav-link" data-scroll-target="#city-based-price-differences"><span class="header-section-number">5.5</span> City-Based Price Differences</a></li>
  </ul></li>
  <li><a href="#expected-vs.-unexpected-results" id="toc-expected-vs.-unexpected-results" class="nav-link" data-scroll-target="#expected-vs.-unexpected-results"><span class="header-section-number">6</span> Expected vs.&nbsp;Unexpected Results</a>
  <ul class="collapse">
  <li><a href="#expected" id="toc-expected" class="nav-link" data-scroll-target="#expected"><span class="header-section-number">6.1</span> Expected</a></li>
  <li><a href="#unexpected" id="toc-unexpected" class="nav-link" data-scroll-target="#unexpected"><span class="header-section-number">6.2</span> Unexpected</a></li>
  </ul></li>
  <li><a href="#model-performance-validity" id="toc-model-performance-validity" class="nav-link" data-scroll-target="#model-performance-validity"><span class="header-section-number">7</span> Model Performance &amp; Validity</a>
  <ul class="collapse">
  <li><a href="#r-squared" id="toc-r-squared" class="nav-link" data-scroll-target="#r-squared"><span class="header-section-number">7.1</span> R-Squared</a></li>
  <li><a href="#variance-inflation-factor-vif-checks" id="toc-variance-inflation-factor-vif-checks" class="nav-link" data-scroll-target="#variance-inflation-factor-vif-checks"><span class="header-section-number">7.2</span> Variance Inflation Factor (VIF) Checks</a></li>
  </ul></li>
  <li><a href="#impact-future-research" id="toc-impact-future-research" class="nav-link" data-scroll-target="#impact-future-research"><span class="header-section-number">8</span> Impact &amp; Future Research</a>
  <ul class="collapse">
  <li><a href="#business-impact" id="toc-business-impact" class="nav-link" data-scroll-target="#business-impact"><span class="header-section-number">8.1</span> Business Impact</a></li>
  <li><a href="#consumer-insights" id="toc-consumer-insights" class="nav-link" data-scroll-target="#consumer-insights"><span class="header-section-number">8.2</span> Consumer Insights</a></li>
  <li><a href="#future-research-directions" id="toc-future-research-directions" class="nav-link" data-scroll-target="#future-research-directions"><span class="header-section-number">8.3</span> Future Research Directions</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">9</span> References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analyzing Key Factors Affecting Airbnb Prices Across Berlin, London, and Paris</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kevin Cheng, Yueyang Ding, Tiffany Gong, Chenguang Li </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="summary" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="summary"><span class="header-section-number">1</span> Summary</h2>
<p>This project aims to develop a predictive model to estimate Airbnb listing prices in Berlin, London, and Paris using key property and location-based attributes. The dataset, sourced from a publicly available Airbnb repository, includes variables such as room type, guest ratings, host status, distance to city center, and neighborhood attractiveness scores. To enhance model performance, we apply exploratory data analysis (EDA), correlation analysis, and multiple linear regression to determine the most significant predictors of price. Our findings align with previous research that highlights the influence of location, property characteristics, and host reputation on pricing strategies in the short-term rental market. The evaluation of our model relies on R-squared to measure explanatory power and Root Mean Squared Error (RMSE) to assess prediction accuracy. By identifying key pricing factors, this study provides insights that can guide Airbnb hosts in optimizing their pricing strategies and travelers in making informed booking decisions.</p>
</section>
<section id="introduction" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2</span> Introduction</h2>
<p>The rapid expansion of peer-to-peer accommodation platforms like Airbnb has significantly transformed the hospitality industry, enabling homeowners to monetize their properties while offering travelers diverse lodging options. Unlike hotels, Airbnb prices are highly variable, influenced by factors such as property type, host reputation, and location-specific characteristics <span class="citation" data-cites="airbnb_disruptive">(<a href="#ref-airbnb_disruptive" role="doc-biblioref">Guttentag 2013</a>)</span>. Understanding the determinants of Airbnb pricing is crucial for both hosts seeking to maximize revenue and travelers looking for cost-effective stays.</p>
<p>Given the dynamic nature of Airbnb pricing, identifying the key factors that influence listing prices has been a focal point of research. Prior studies have investigated how aspects such as property characteristics, location, and host reputation contribute to price variations. However, price determinants may differ across cities due to unique market conditions and demand fluctuations. Thus, a more comprehensive analysis is needed to quantify these effects across different urban contexts.</p>
<p>This study aims to analyze the factors that influence Airbnb prices across Berlin, London, and Paris. By leveraging publicly available Airbnb listing data, we examine the role of various attributes, including room type, guest satisfaction ratings, host status, and proximity to city landmarks. Previous research has shown that location and property attributes are key drivers of pricing <span class="citation" data-cites="airbnb_future">(<a href="#ref-airbnb_future" role="doc-biblioref">Oskam and Boswijk 2015</a>)</span>, but this study seeks to further quantify their impact using regression-based modeling.</p>
<p>Prior studies have also emphasized the importance of host-related attributes, such as Superhost status and guest review scores, in determining Airbnb listing prices <span class="citation" data-cites="airbnb_price_determinants">(<a href="#ref-airbnb_price_determinants" role="doc-biblioref">Teubner, Hawlitschek, and Dann 2017</a>)</span>. A highly rated host can often command a higher price due to increased trust and perceived quality from potential guests.</p>
<p>Beyond host characteristics, broader market factors also influence short-term rental pricing. Research suggests that urban tourism trends and local demand-supply dynamics play a significant role in price fluctuations, particularly during peak seasons and major events, when demand surges and hosts adjust prices accordingly <span class="citation" data-cites="airbnb_analysis">(<a href="#ref-airbnb_analysis" role="doc-biblioref">Toader et al. 2020</a>)</span>.</p>
<p>Given these insights, it is evident that Airbnb pricing is influenced by both micro-level attributes (e.g., host reputation and property features) and macro-level market factors (e.g., tourism trends and seasonal demand fluctuations). However, most prior studies have focused on isolated factors, such as host-related attributes or location-based pricing, without integrating multiple key determinants into a unified predictive framework.</p>
<p>To address this gap, this study aims to develop a comprehensive pricing prediction model that incorporates both property-specific features (e.g., room type, capacity, and cleanliness rating) and external market influences (e.g., demand fluctuations and urban attractiveness). By analyzing Airbnb listings across Berlin, London, and Paris, we seek to determine the most significant predictors of price and assess their relative impact.</p>
<p>Thus, our central research question is:</p>
<p><strong><em>“What are the most significant factors that influence Airbnb listing prices in Berlin, London, and Paris?”</em></strong></p>
<p>By identifying these key pricing determinants, this study aims to provide practical insights for Airbnb hosts optimizing their pricing strategies, travelers making cost-effective booking decisions, and market analysts studying rental price trends.</p>
</section>
<section id="dataset-description" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="dataset-description"><span class="header-section-number">3</span> Dataset Description</h2>
<p>The dataset contains 19,165 listings from Berlin, London, and Paris with variables such as room type, location, guest satisfaction, and amenities. Below is a description of the key dataset variables used in the analysis:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 34%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>realSum</code></td>
<td>The price of the listing (target variable).</td>
</tr>
<tr class="even">
<td><code>room_type</code></td>
<td>Type of accommodation (<code>Entire home</code>, <code>Private room</code>, <code>Shared room</code>).</td>
</tr>
<tr class="odd">
<td><code>person_capacity</code></td>
<td>Maximum occupancy.</td>
</tr>
<tr class="even">
<td><code>host_is_superhost</code></td>
<td>Whether the host is a superhost (<code>TRUE/FALSE</code>).</td>
</tr>
<tr class="odd">
<td><code>cleanliness_rating</code></td>
<td>Guest cleanliness rating (scale of 1-5).</td>
</tr>
<tr class="even">
<td><code>guest_satisfaction_overall</code></td>
<td>Overall guest rating.</td>
</tr>
<tr class="odd">
<td><code>dist</code></td>
<td>Distance to the city center (in km).</td>
</tr>
<tr class="even">
<td><code>metro_dist</code></td>
<td>Distance to the nearest metro station (in km).</td>
</tr>
<tr class="odd">
<td><code>attr_index</code></td>
<td>Tourism attractiveness score.</td>
</tr>
<tr class="even">
<td><code>rest_index</code></td>
<td>Restaurant quality score.</td>
</tr>
<tr class="odd">
<td><code>weekdays</code></td>
<td>Availability on weekdays (<code>TRUE</code> = weekday, <code>FALSE</code> = weekend).</td>
</tr>
<tr class="even">
<td><code>city</code></td>
<td>The city where the listing is located (<code>Berlin</code>, <code>London</code>, <code>Paris</code>).</td>
</tr>
</tbody>
</table>
<div class="cell" data-fig.margin="80px">
<div id="tbl-data1" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-fig.margin="80px">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: First few rows of Airbnb data
</figcaption>
<div aria-describedby="tbl-data1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">X</th>
<th style="text-align: right;">realSum</th>
<th style="text-align: left;">room_type</th>
<th style="text-align: left;">room_shared</th>
<th style="text-align: left;">room_private</th>
<th style="text-align: right;">person_capacity</th>
<th style="text-align: left;">host_is_superhost</th>
<th style="text-align: right;">multi</th>
<th style="text-align: right;">biz</th>
<th style="text-align: right;">cleanliness_rating</th>
<th style="text-align: right;">guest_satisfaction_overall</th>
<th style="text-align: right;">bedrooms</th>
<th style="text-align: right;">dist</th>
<th style="text-align: right;">metro_dist</th>
<th style="text-align: right;">attr_index</th>
<th style="text-align: right;">attr_index_norm</th>
<th style="text-align: right;">rest_index</th>
<th style="text-align: right;">rest_index_norm</th>
<th style="text-align: right;">lng</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">weekdays</th>
<th style="text-align: left;">city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">185.7998</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">98</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.5822108</td>
<td style="text-align: right;">0.1747056</td>
<td style="text-align: right;">105.06371</td>
<td style="text-align: right;">16.019042</td>
<td style="text-align: right;">148.94111</td>
<td style="text-align: right;">30.71064</td>
<td style="text-align: right;">13.42344</td>
<td style="text-align: right;">52.49150</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">194.9145</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">False</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.5254103</td>
<td style="text-align: right;">0.5119218</td>
<td style="text-align: right;">75.33953</td>
<td style="text-align: right;">11.487002</td>
<td style="text-align: right;">106.44236</td>
<td style="text-align: right;">21.94768</td>
<td style="text-align: right;">13.46800</td>
<td style="text-align: right;">52.51900</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">176.2176</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">False</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.8017128</td>
<td style="text-align: right;">0.2813965</td>
<td style="text-align: right;">73.66918</td>
<td style="text-align: right;">11.232324</td>
<td style="text-align: right;">105.44020</td>
<td style="text-align: right;">21.74105</td>
<td style="text-align: right;">13.47096</td>
<td style="text-align: right;">52.51527</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">207.7685</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.9824082</td>
<td style="text-align: right;">0.7055731</td>
<td style="text-align: right;">133.18741</td>
<td style="text-align: right;">20.307057</td>
<td style="text-align: right;">198.23336</td>
<td style="text-align: right;">40.87436</td>
<td style="text-align: right;">13.42281</td>
<td style="text-align: right;">52.53139</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">150.7432</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">False</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">99</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8.8696972</td>
<td style="text-align: right;">2.1871883</td>
<td style="text-align: right;">39.86015</td>
<td style="text-align: right;">6.077469</td>
<td style="text-align: right;">50.99631</td>
<td style="text-align: right;">10.51509</td>
<td style="text-align: right;">13.52440</td>
<td style="text-align: right;">52.47842</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">139.2914</td>
<td style="text-align: left;">Private room</td>
<td style="text-align: left;">False</td>
<td style="text-align: left;">True</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">False</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">87</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.5446646</td>
<td style="text-align: right;">0.3665525</td>
<td style="text-align: right;">103.48108</td>
<td style="text-align: right;">15.777739</td>
<td style="text-align: right;">148.45805</td>
<td style="text-align: right;">30.61103</td>
<td style="text-align: right;">13.42727</td>
<td style="text-align: right;">52.49224</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">berlin</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="tbl-data2" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-fig.margin="80px">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Summary of the Airbnb dataset, variable types, sample values, missing data count.
</figcaption>
<div aria-describedby="tbl-data2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   19165 obs. of  22 variables:
 $ X                         : int  0 1 2 3 4 5 6 7 8 9 ...
 $ realSum                   : num  186 195 176 208 151 ...
 $ room_type                 : Factor w/ 3 levels "Entire home/apt",..: 2 2 2 2 2 2 1 2 2 1 ...
 $ room_shared               : chr  "False" "False" "False" "False" ...
 $ room_private              : chr  "True" "True" "True" "True" ...
 $ person_capacity           : num  2 5 2 3 2 2 6 2 2 3 ...
 $ host_is_superhost         : Factor w/ 2 levels "False","True": 2 1 1 2 1 1 2 2 2 2 ...
 $ multi                     : int  0 0 0 0 0 1 0 0 1 1 ...
 $ biz                       : int  0 1 0 0 0 0 0 0 0 0 ...
 $ cleanliness_rating        : num  10 9 9 10 10 8 10 10 10 10 ...
 $ guest_satisfaction_overall: num  98 86 91 97 99 87 97 96 100 98 ...
 $ bedrooms                  : int  1 1 1 1 1 1 2 1 1 1 ...
 $ dist                      : num  3.582 3.525 3.802 0.982 8.87 ...
 $ metro_dist                : num  0.175 0.512 0.281 0.706 2.187 ...
 $ attr_index                : num  105.1 75.3 73.7 133.2 39.9 ...
 $ attr_index_norm           : num  16.02 11.49 11.23 20.31 6.08 ...
 $ rest_index                : num  149 106 105 198 51 ...
 $ rest_index_norm           : num  30.7 21.9 21.7 40.9 10.5 ...
 $ lng                       : num  13.4 13.5 13.5 13.4 13.5 ...
 $ lat                       : num  52.5 52.5 52.5 52.5 52.5 ...
 $ weekdays                  : Factor w/ 2 levels "FALSE","TRUE": 2 2 2 2 2 2 2 2 2 2 ...
 $ city                      : Factor w/ 3 levels "berlin","london",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>The number of missing values is: 0 </code></pre>
</div>
</div>
</figure>
</div>
<div id="tbl-data3" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-fig.margin="80px">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Summary statistics of selected numeric variables.
</figcaption>
<div aria-describedby="tbl-data3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-stdout">
<pre><code>    realSum         person_capacity    bedrooms          dist         
 Min.   :   54.33   Min.   :2.000   Min.   :0.000   Min.   : 0.04055  
 1st Qu.:  183.38   1st Qu.:2.000   1st Qu.:1.000   1st Qu.: 2.58936  
 Median :  276.82   Median :2.000   Median :1.000   Median : 4.05918  
 Mean   :  357.68   Mean   :2.874   Mean   :1.067   Mean   : 4.50413  
 3rd Qu.:  426.40   3rd Qu.:4.000   3rd Qu.:1.000   3rd Qu.: 5.77472  
 Max.   :16445.62   Max.   :6.000   Max.   :9.000   Max.   :25.28456  
   metro_dist         attr_index      attr_index_norm    rest_index     
 Min.   : 0.00322   Min.   :  15.15   Min.   :  2.31   Min.   :  19.58  
 1st Qu.: 0.20536   1st Qu.: 175.85   1st Qu.: 12.22   1st Qu.: 371.07  
 Median : 0.35334   Median : 268.30   Median : 16.52   Median : 578.02  
 Mean   : 0.71200   Mean   : 298.92   Mean   : 19.24   Mean   : 631.97  
 3rd Qu.: 0.66388   3rd Qu.: 385.82   3rd Qu.: 23.37   3rd Qu.: 831.06  
 Max.   :14.27358   Max.   :2056.55   Max.   :100.00   Max.   :5587.14  
 rest_index_norm  
 Min.   :  2.515  
 1st Qu.:  9.078  
 Median : 17.843  
 Mean   : 24.695  
 3rd Qu.: 36.447  
 Max.   :100.000  </code></pre>
</div>
</div>
</figure>
</div>
<section id="exploratory-data-analysis" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="exploratory-data-analysis"><span class="header-section-number">3.1</span> Exploratory Data Analysis</h3>
<p><a href="#fig-histograms" class="quarto-xref">Figure&nbsp;1</a> displays the distribution of key predictor variables in the dataset. These histograms provide insight into how each variable is spread and whether they exhibit skewness. Most variables showing a right-skewed distribution, indicating a concentration of lower values with a few extreme outliers. The distributions of distance-based predictors (dist and metro_dist) suggest that most listings are located closer to central areas, with a gradual decline in frequency as distance increases.</p>
<div id="fig-histograms" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-histograms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Distributions of predictor variables used in modeling Airbnb price.
</figcaption>
<div aria-describedby="fig-histograms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/histograms.png" class="img-fluid figure-img" style="width:70.0%">
</div>
</figure>
</div>
</section>
<section id="correlation-matrix-of-numerical-variables" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="correlation-matrix-of-numerical-variables"><span class="header-section-number">3.2</span> Correlation Matrix of Numerical Variables</h3>
<p>To examine potential relationships between numerical variables, we computed pairwise Pearson correlation coefficients and visualized them using a heatmap. Darker blue shades indicate strong positive correlations, while darker red shades denote strong negative correlations. We observe that realSum (our target variable) has positive correlations with person_capacity and bedrooms, implying that larger accommodations tend to have higher prices. Conversely, dist and metro_dist exhibit weak or slightly negative correlations with realSum, suggesting that properties farther from city centers may not necessarily be priced higher.</p>
<div id="fig-matrix" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Correlation matrix of predictor variables and price, with color indicating the strength and direction of relationships.
</figcaption>
<div aria-describedby="fig-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/correlation_matrix.png" class="img-fluid figure-img" style="width:70.0%">
</div>
</figure>
</div>
</section>
<section id="regression-analysis" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="regression-analysis"><span class="header-section-number">3.3</span> Regression Analysis</h3>
<p>A multiple linear regression model was fitted to predict Airbnb prices using key listing attributes. <a href="#fig-summary" class="quarto-xref">Figure&nbsp;3</a> summarizes the model coefficients, indicating the effect of each predictor on price.</p>
<div id="fig-summary" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Linear regression results for Airbnb price as a function of listing characteristics.
</figcaption>
<div aria-describedby="fig-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<embed src="../results/model_summary.txt" class="img-fluid" style="width:70.0%">
</div>
</figure>
</div>
<p><a href="#fig-residuals_plot" class="quarto-xref">Figure&nbsp;4</a> shows the residuals of the model, which appear to be relatively evenly distributed around zero. However, some variance remains unexplained, suggesting that additional factors such as seasonal demand fluctuations or host pricing strategies could be influencing Airbnb prices.</p>
<div id="fig-residuals_plot" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-residuals_plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Residuals plot for the regression model, showing the distribution of errors around zero.
</figcaption>
<div aria-describedby="fig-residuals_plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../results/residuals_plot.png" class="img-fluid figure-img" style="width:70.0%">
</div>
</figure>
</div>
</section>
</section>
<section id="discussion" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="discussion"><span class="header-section-number">4</span> Discussion</h2>
<p>Our analysis of Airbnb listings in Berlin, London, and Paris identified several key factors that influence pricing. We found that the number of bedrooms and guest capacity are among the strongest predictors of price, with larger accommodations commanding higher rates. Additionally, location plays a significant role, as listings near metro stations tend to have higher prices due to increased accessibility. The impact of being a superhost was positive but relatively minor compared to other factors. Surprisingly, while guest satisfaction ratings contribute to pricing, they do not appear to be as influential as property size and location.</p>
</section>
<section id="key-findings" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="key-findings"><span class="header-section-number">5</span> Key Findings</h2>
<section id="strongest-predictors-of-price" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="strongest-predictors-of-price"><span class="header-section-number">5.1</span> Strongest Predictors of Price</h3>
<p><strong>Person Capacity (+48.29 per additional person)</strong>: Listings accommodating more guests tend to be more expensive.</p>
<p><strong>Bedrooms (+143.87 per additional bedroom)</strong>: More bedrooms significantly increase the price.</p>
<p><strong>Tourism Attraction Index (+8.86 per unit increase)</strong>: Higher attraction index leads to higher prices, confirming that locations with popular tourist attractions are more expensive.</p>
</section>
<section id="location-based-effects" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="location-based-effects"><span class="header-section-number">5.2</span> Location-Based Effects</h3>
<p><strong>Distance from the City Center (+9.73 per km)</strong>: Surprisingly, prices increase slightly as the distance from the city center grows. This suggests that some high-end properties exist further from the city core, possibly in suburban or scenic locations.</p>
<p><strong>Distance from Metro (-19.50 per km)</strong>: Listings farther from metro stations are cheaper, showing that metro accessibility is a key pricing factor.</p>
</section>
<section id="effect-of-host-room-type" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="effect-of-host-room-type"><span class="header-section-number">5.3</span> Effect of Host &amp; Room Type</h3>
<p><strong>Superhost Status (+25.78 for superhosts)</strong>: Superhosts charge slightly higher prices, likely due to better reviews and perceived trustworthiness.</p>
</section>
<section id="room-type" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="room-type"><span class="header-section-number">5.4</span> Room Type</h3>
<p><strong>Private Rooms (-145.59)</strong>: Private rooms are significantly cheaper than entire homes.</p>
<p><strong>Shared Rooms (-249.30)</strong>: The cheapest option, with prices much lower than entire homes.</p>
</section>
<section id="city-based-price-differences" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="city-based-price-differences"><span class="header-section-number">5.5</span> City-Based Price Differences</h3>
<p><strong>Paris (+86.64 compared to Berlin)</strong> and <strong>London(+75.57 compared to Berlin)</strong> are significantly more expensive.</p>
<p>The results confirm that Paris has the highest Airbnb prices, followed by London, while Berlin is the most affordable.</p>
<p><strong>Weekdays vs.&nbsp;Weekends:</strong></p>
<p>No significant difference (p = 0.654).</p>
<p>Prices remain stable between weekdays and weekends, indicating consistent demand rather than peak pricing strategies.</p>
</section>
</section>
<section id="expected-vs.-unexpected-results" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="expected-vs.-unexpected-results"><span class="header-section-number">6</span> Expected vs.&nbsp;Unexpected Results</h2>
<section id="expected" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="expected"><span class="header-section-number">6.1</span> Expected</h3>
<blockquote class="blockquote">
<p>Person capacity, bedrooms, and attraction index significantly influence price, as anticipated.</p>
</blockquote>
<blockquote class="blockquote">
<p>Superhosts charge higher prices, likely due to trust and better service.</p>
</blockquote>
<blockquote class="blockquote">
<p>Room type heavily affects pricing, with entire homes being the most expensive.</p>
</blockquote>
</section>
<section id="unexpected" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="unexpected"><span class="header-section-number">6.2</span> Unexpected</h3>
<blockquote class="blockquote">
<p>City center distance shows a positive relationship with price (instead of negative). This could mean luxury properties exist in suburban areas, or city centers have budget accommodations.</p>
</blockquote>
<blockquote class="blockquote">
<p>Weekday vs.&nbsp;weekend pricing is not significantly different. We expected weekend prices to be slightly higher, but the data suggests a steady demand throughout the week.</p>
</blockquote>
</section>
</section>
<section id="model-performance-validity" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="model-performance-validity"><span class="header-section-number">7</span> Model Performance &amp; Validity</h2>
<section id="r-squared" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="r-squared"><span class="header-section-number">7.1</span> R-Squared</h3>
<blockquote class="blockquote">
<p>The model has R-squared of 0.24(with Adjusted R-squared of 0.2395), meaning that the model explains 24% of Airbnb price variation, meaning other factors like seasonal trends, demand fluctuations, or special events might also influence pricing.</p>
</blockquote>
</section>
<section id="variance-inflation-factor-vif-checks" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="variance-inflation-factor-vif-checks"><span class="header-section-number">7.2</span> Variance Inflation Factor (VIF) Checks</h3>
<blockquote class="blockquote">
<p>rest_index_norm (GVIF = 5.64) is the highest, meaning it might have moderate collinearity with other features.</p>
</blockquote>
<blockquote class="blockquote">
<p>dist (GVIF = 3.64) and city (GVIF = 5.38) are also relatively high.</p>
</blockquote>
<blockquote class="blockquote">
<p>While no extreme multicollinearity exists, some correlation between location-related variables could affect estimates.</p>
</blockquote>
</section>
</section>
<section id="impact-future-research" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="impact-future-research"><span class="header-section-number">8</span> Impact &amp; Future Research</h2>
<section id="business-impact" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="business-impact"><span class="header-section-number">8.1</span> Business Impact</h3>
<p>Understanding these pricing factors can provide good insights for property owners and hosts looking to optimize their listings:</p>
<ul>
<li><p>Property owners should focus on increasing guest capacity and bedrooms to maximize revenue.</p></li>
<li><p>Listings near metro stations can charge higher prices due to increased accessibility.</p></li>
<li><p>While being a superhost slightly boosts prices, it’s not a major pricing factor.</p></li>
</ul>
</section>
<section id="consumer-insights" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="consumer-insights"><span class="header-section-number">8.2</span> Consumer Insights</h3>
<p>These results also provide valuable insights for consumers, helping them make more informed decisions when booking Airbnbs:</p>
<ul>
<li><p>Consumers can use these findings to assess whether a listing’s price is reasonable based on key factors like location, room size, and amenities, avoiding overpriced listings.</p></li>
<li><p>They may adjust their booking strategies, such as selecting less central locations with good transit access, to get better deals while still maintaining convenience.</p></li>
</ul>
</section>
<section id="future-research-directions" class="level3" data-number="8.3">
<h3 data-number="8.3" class="anchored" data-anchor-id="future-research-directions"><span class="header-section-number">8.3</span> Future Research Directions</h3>
<p>While this analysis provides valuable insights into Airbnb pricing, several areas warrant further investigation to refine and expand upon these findings.</p>
<p>A. <strong>Enhancing Model Performance</strong></p>
<ul>
<li><p>The current model explains only a portion of the variation in listing prices. Future studies could explore more advanced modeling techniques, such as non-linear regression methods, tree-based models, or ensemble approaches, to improve predictive accuracy.</p></li>
<li><p>Incorporating additional features, such as review sentiment scores, booking frequency, or cancellation policies, may also enhance the model’s ability to capture key pricing drivers.</p></li>
</ul>
<p>B. <strong>Exploring Seasonal and Event-Based Price Variations</strong></p>
<ul>
<li><p>Seasonal trends, such as holiday periods and peak travel seasons, likely influence short-term rental prices. Analyzing how pricing fluctuates throughout the year could offer a deeper understanding of demand-driven adjustments.</p></li>
<li><p>Major events, including conferences, festivals, and sporting events, may create short-term price surges. Examining the extent of these effects across different cities could provide valuable insights for both hosts and policymakers.</p></li>
</ul>
<p>C. <strong>Assessing Neighborhood-Level Demand Patterns</strong></p>
<ul>
<li><p>Price variations are often shaped by local factors, such as proximity to tourist attractions, business districts, or public transportation hubs. A more granular spatial analysis could help identify high-demand areas and their characteristics.</p></li>
<li><p>Studying shifts in neighborhood popularity over time may also reveal emerging trends in the short-term rental market.</p></li>
</ul>
<p>D. <strong>Understanding the Impact of Policy and Economic Conditions</strong></p>
<ul>
<li><p>Government regulations on short-term rentals, such as caps on rental days or stricter licensing requirements, may have significant implications for pricing and market dynamics. Investigating policy interventions across different regions could shed light on their long-term effects.</p></li>
<li><p>Broader economic factors, including inflation rates, tourism activity, and local cost of living, may also play a role in shaping Airbnb pricing strategies. Future research could examine how these external influences interact with host-driven pricing decisions.</p></li>
</ul>
<p>E. <strong>Comparing Consumer Preferences Across Markets</strong></p>
<ul>
<li><p>Pricing strategies are often influenced by guest expectations and booking behaviors. A deeper analysis of guest reviews, satisfaction ratings, and preferred amenities across cities may provide insights into how consumer preferences shape listing prices.</p></li>
<li><p>Understanding why Paris consistently commands higher prices than Berlin or London could reveal cultural or market-driven differences that extend beyond property attributes alone.</p></li>
</ul>
</section>
</section>
<section id="references" class="level2 unnumbered" data-number="9">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">9 References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-airbnb_disruptive" class="csl-entry" role="listitem">
Guttentag, Daniel. 2013. <span>“Airbnb: Disruptive Innovation and the Rise of an Informal Tourism Accommodation Sector.”</span> <a href="https://www.researchgate.net/publication/271624904_Airbnb_Disruptive_innovation_and_the_rise_of_an_informal_tourism_accommodation_sector">https://www.researchgate.net/publication/271624904_Airbnb_Disruptive_innovation_and_the_rise_of_an_informal_tourism_accommodation_sector</a>.
</div>
<div id="ref-airbnb_future" class="csl-entry" role="listitem">
Oskam, Jeroen, and Albert Boswijk. 2015. <span>“Airbnb: The Future of Networked Hospitality Businesses.”</span> <a href="https://www.researchgate.net/publication/298305479_Airbnb_The_future_of_networked_hospitality_businesses">https://www.researchgate.net/publication/298305479_Airbnb_The_future_of_networked_hospitality_businesses</a>.
</div>
<div id="ref-airbnb_price_determinants" class="csl-entry" role="listitem">
Teubner, Timm, Florian Hawlitschek, and David Dann. 2017. <span>“Price Determinants on Airbnb: How Reputation Pays Off in the Sharing Economy.”</span> <a href="https://www.researchgate.net/publication/315838775_Price_Determinants_on_Airbnb_How_Reputation_Pays_Off_in_the_Sharing_Economy">https://www.researchgate.net/publication/315838775_Price_Determinants_on_Airbnb_How_Reputation_Pays_Off_in_the_Sharing_Economy</a>.
</div>
<div id="ref-airbnb_analysis" class="csl-entry" role="listitem">
Toader, Valentin, Adina Letiţia Negrușa, Oana Ruxandra Bode, and Rozalia Veronica Rus. 2020. <span>“Analysis of Price Determinants in the Case of Airbnb Listings.”</span> <a href="https://www.tandfonline.com/doi/full/10.1080/1331677X.2021.1962380">https://www.tandfonline.com/doi/full/10.1080/1331677X.2021.1962380</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>